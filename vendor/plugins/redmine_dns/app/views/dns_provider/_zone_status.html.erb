<style type="text/css">
  .icon-true {
    background-image:url(../images/true.png);
  }
</style>

<br/>
<form id="record_form" method="post" action="/dns_provider/commit">
<fieldset>
  <legend>Domain info</legend>
  <table class="list">
    <tr>
      <td><b>hostmaster: </b></td>
      <td><label><%= @zone.soarname or 'NA' %> </label></td>
      <td><label>records: </label></td>
      <td><label><%= @zone.rrstotal or 'NA'%></label></td>
      <td id="td_commit" rowspan="2" >
        <%= button_to_remote(:commit, :url => {:action => :commit},
                             :with => "Form.serialize('record_form')") %>
        <input type="hidden" name="domain" value="<%= @zone.name %>" />
      </td>

    </tr>
    <tr>
      <td><b>primary NS: </b></td>
      <td><label><%= @zone.soamname or 'NA' %></label></td>
      <td><label>www target: </label></td>
      <td><label><%= @zone.wwwtargetdata or 'NA' %>  (<%=@zone.wwwtargettype%>)</label></td>
  </tr>
  </table>
</fieldset>
<br/>
<div class="autoscroll">
  <table class="list" style="text-align: left">
  <thead>
    <tr>
	<th><%=l(:label_rrtype)%></th>
	<th><%=l(:label_rrdata)%></th>
        <th></th>
    </tr>
  </thead>
  <tbody id="records_table">
    <% @records.each do |record| %>
      <%= render :partial => 'record', :locals => {:zone => @zone, :record => record} %>
    <% end %>
    <%= render :partial => 'empty_record',
               :locals => { :zone => @zone, :count => (@records.length+1).to_s } %>
  </tbody>
</table>
</div>
</form>
<div>
  <% form_remote_tag(:html => { :id => "template_form",
    :action => url_for(:controller => "dns_provider", :action => "add_template")}) do %>
    <label>add template</label>
    <span style="padding-right:5px; width:15px">
      <%= select_tag('rr_template', rrtemplate_for_select(), :class => "small") %>
      <%=  observe_field(:rr_template, :url => {:action => :load_template},
                         :with => "Form.Element.serialize('rr_template')", :update => :preview_template) %>
    </span>
    <span style="padding-right:5px;">
    <%= link_to_remote('apply', :url => {:controller => 'dns_provider', :action => 'apply_template'},
                                :with => "Form.serialize('provider_form')" ) %>
    </span>
  <% end %>
</div>
<div id="flash"></div>
<form id="template_form" action="/">
  <div id="preview_template">
  </div>
</form>